import{c as k,o as Z,r as he,b,a as de,d as ee,u as F,e as pe,f as ge,j as te,k as G,l as me,m as ye,s as we,n as h,p as ne,q as be,S as re,v as z,w as ve,g as L,x as $e,y as Se,t as T,z as _e,A as _,B as v,C as xe,N as Pe,D as Ce}from"./web.80f85a63.js";import V from"./Counter.island.b33738ca.js";import Re from"./Expandable.island.5609597e.js";import Ae from"./MediaQuery.island.19adc086.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function r(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(n){if(n.ep)return;n.ep=!0;const s=r(n);fetch(n.href,s)}})();function Ee(e,t,r){return e.addEventListener(t,r),()=>e.removeEventListener(t,r)}function Le([e,t],r,o){return[r?()=>r(e()):e,o?n=>t(o(n)):t]}function Te(e){try{return document.querySelector(e)}catch{return null}}function Oe(e,t){const r=Te(`#${e}`);r?r.scrollIntoView():t&&window.scrollTo(0,0)}function Ne(e,t,r,o){let n=!1;const s=i=>typeof i=="string"?{value:i}:i,a=Le(k(s(e()),{equals:(i,c)=>i.value===c.value}),void 0,i=>(!n&&t(i),i));return r&&Z(r((i=e())=>{n=!0,a[1](s(i)),n=!1})),{signal:a,utils:o}}function Ie(e){if(e){if(Array.isArray(e))return{signal:e}}else return{signal:k({value:""})};return e}function ke(){return Ne(()=>({value:window.location.pathname+window.location.search+window.location.hash,state:history.state}),({value:e,replace:t,scroll:r,state:o})=>{t?window.history.replaceState(o,"",e):window.history.pushState(o,"",e),Oe(window.location.hash.slice(1),r)},e=>Ee(window,"popstate",()=>e()),{go:e=>window.history.go(e)})}function Be(){let e=new Set;function t(n){return e.add(n),()=>e.delete(n)}let r=!1;function o(n,s){if(r)return!(r=!1);const a={to:n,options:s,defaultPrevented:!1,preventDefault:()=>a.defaultPrevented=!0};for(const i of e)i.listener({...a,from:i.location,retry:c=>{c&&(r=!0),i.navigate(n,s)}});return!a.defaultPrevented}return{subscribe:t,confirm:o}}const He=/^(?:[a-z0-9]+:)?\/\//i,qe=/^\/+|\/+$/g;function E(e,t=!1){const r=e.replace(qe,"");return r?t||/^[?#]/.test(r)?r:"/"+r:""}function j(e,t,r){if(He.test(t))return;const o=E(e),n=r&&E(r);let s="";return!n||t.startsWith("/")?s=o:n.toLowerCase().indexOf(o.toLowerCase())!==0?s=o+n:s=n,(s||"/")+E(t,!s)}function De(e,t){if(e==null)throw new Error(t);return e}function oe(e,t){return E(e).replace(/\/*(\*.*)?$/g,"")+E(t)}function Ue(e){const t={};return e.searchParams.forEach((r,o)=>{t[o]=r}),t}function K(e,t){return decodeURIComponent(t?e.replace(/\+/g," "):e)}function je(e,t){const[r,o]=e.split("/*",2),n=r.split("/").filter(Boolean),s=n.length;return a=>{const i=a.split("/").filter(Boolean),c=i.length-s;if(c<0||c>0&&o===void 0&&!t)return null;const l={path:s?"":"/",params:{}};for(let u=0;u<s;u++){const g=n[u],m=i[u];if(g[0]===":")l.params[g.slice(1)]=m;else if(g.localeCompare(m,void 0,{sensitivity:"base"})!==0)return null;l.path+=`/${m}`}return o&&(l.params[o]=c?i.slice(-c).join("/"):""),l}}function Ke(e){const[t,r]=e.pattern.split("/*",2),o=t.split("/").filter(Boolean);return o.reduce((n,s)=>n+(s.startsWith(":")?2:3),o.length-(r===void 0?0:1))}function se(e){const t=new Map,r=de();return new Proxy({},{get(o,n){return t.has(n)||he(r,()=>t.set(n,b(()=>e()[n]))),t.get(n)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(e())}})}function ae(e){let t=/(\/?\:[^\/]+)\?/.exec(e);if(!t)return[e];let r=e.slice(0,t.index),o=e.slice(t.index+t[0].length);const n=[r,r+=t[1]];for(;t=/^(\/\:[^\/]+)\?/.exec(o);)n.push(r+=t[1]),o=o.slice(t[0].length);return ae(o).reduce((s,a)=>[...s,...n.map(i=>i+a)],[])}const Me=100,ie=ee(),M=ee(),W=()=>De(F(ie),"Make sure your app is wrapped in a <Router />");let B;const J=()=>B||F(M)||W().base,We=e=>{const t=J();return b(()=>t.resolvePath(e()))},ze=e=>{const t=W();return b(()=>{const r=e();return r!==void 0?t.renderPath(r):r})},Fe=()=>W().location;function Je(e,t="",r){const{component:o,data:n,children:s}=e,a=!s||Array.isArray(s)&&!s.length,i={key:e,element:o?()=>h(o,{}):()=>{const{element:c}=e;return c===void 0&&r?h(r,{}):c},preload:e.component?o.preload:e.preload,data:n};return ce(e.path).reduce((c,l)=>{for(const u of ae(l)){const g=oe(t,u),m=a?g:g.split("/*",1)[0];c.push({...i,originalPath:u,pattern:m,matcher:je(m,!a)})}return c},[])}function Qe(e,t=0){return{routes:e,score:Ke(e[e.length-1])*1e4-t,matcher(r){const o=[];for(let n=e.length-1;n>=0;n--){const s=e[n],a=s.matcher(r);if(!a)return null;o.unshift({...a,route:s})}return o}}}function ce(e){return Array.isArray(e)?e:[e]}function le(e,t="",r,o=[],n=[]){const s=ce(e);for(let a=0,i=s.length;a<i;a++){const c=s[a];if(c&&typeof c=="object"&&c.hasOwnProperty("path")){const l=Je(c,t,r);for(const u of l){o.push(u);const g=Array.isArray(c.children)&&c.children.length===0;if(c.children&&!g)le(c.children,u.pattern,r,o,n);else{const m=Qe([...o],n.length);n.push(m)}o.pop()}}}return o.length?n:n.sort((a,i)=>i.score-a.score)}function Xe(e,t){for(let r=0,o=e.length;r<o;r++){const n=e[r].matcher(t);if(n)return n}return[]}function Ge(e,t){const r=new URL("http://sar"),o=b(c=>{const l=e();try{return new URL(l,r)}catch{return console.error(`Invalid path ${l}`),c}},r,{equals:(c,l)=>c.href===l.href}),n=b(()=>K(o().pathname)),s=b(()=>K(o().search,!0)),a=b(()=>K(o().hash)),i=b(()=>"");return{get pathname(){return n()},get search(){return s()},get hash(){return a()},get state(){return t()},get key(){return i()},query:se(te(s,()=>Ue(o())))}}function Ve(e,t="",r,o){const{signal:[n,s],utils:a={}}=Ie(e),i=a.parsePath||(p=>p),c=a.renderPath||(p=>p),l=a.beforeLeave||Be(),u=j("",t),g=void 0;if(u===void 0)throw new Error(`${u} is not a valid base path`);u&&!n().value&&s({value:u,replace:!0,scroll:!1});const[m,w]=k(!1),d=async p=>{w(!0);try{await we(p)}finally{w(!1)}},[x,P]=k(n().value),[$,O]=k(n().state),H=Ge(x,$),C=[],S={pattern:u,params:{},path:()=>u,outlet:()=>null,resolvePath(p){return j(u,p)}};if(r)try{B=S,S.data=r({data:void 0,params:{},location:H,navigate:X(S)})}finally{B=void 0}function Q(p,f,y){G(()=>{if(typeof f=="number"){f&&(a.go?l.confirm(f,y)&&a.go(f):console.warn("Router integration does not support relative routing"));return}const{replace:q,resolve:D,scroll:R,state:N}={replace:!1,resolve:!0,scroll:!0,...y},A=D?p.resolvePath(f):j("",f);if(A===void 0)throw new Error(`Path '${f}' is not a routable path`);if(C.length>=Me)throw new Error("Too many redirects");const I=x();if((A!==I||N!==$())&&!me){if(l.confirm(A,y)){const U=C.push({value:I,replace:q,scroll:R,state:$()});d(()=>{P(A),O(N),ye()}).then(()=>{C.length===U&&fe({value:A,state:N})})}}})}function X(p){return p=p||F(M)||S,(f,y)=>Q(p,f,y)}function fe(p){const f=C[0];f&&((p.value!==f.value||p.state!==f.state)&&s({...p,replace:f.replace,scroll:f.scroll}),C.length=0)}pe(()=>{const{value:p,state:f}=n();G(()=>{p!==x()&&d(()=>{P(p),O(f)})})});{let p=function(f){if(f.defaultPrevented||f.button!==0||f.metaKey||f.altKey||f.ctrlKey||f.shiftKey)return;const y=f.composedPath().find(U=>U instanceof Node&&U.nodeName.toUpperCase()==="A");if(!y||!y.hasAttribute("link"))return;const q=y.href;if(y.target||!q&&!y.hasAttribute("state"))return;const D=(y.getAttribute("rel")||"").split(/\s+/);if(y.hasAttribute("download")||D&&D.includes("external"))return;const R=new URL(q),N=K(R.pathname);if(R.origin!==window.location.origin||u&&N&&!N.toLowerCase().startsWith(u.toLowerCase()))return;const A=i(R.pathname+R.search+R.hash),I=y.getAttribute("state");f.preventDefault(),Q(S,A,{resolve:!1,replace:y.hasAttribute("replace"),scroll:!y.hasAttribute("noscroll"),state:I&&JSON.parse(I)})};ge(["click"]),document.addEventListener("click",p),Z(()=>document.removeEventListener("click",p))}return{base:S,out:g,location:H,isRouting:m,renderPath:c,parsePath:i,navigatorFactory:X,beforeLeave:l}}function Ye(e,t,r,o){const{base:n,location:s,navigatorFactory:a}=e,{pattern:i,element:c,preload:l,data:u}=o().route,g=b(()=>o().path),m=se(()=>o().params);l&&l();const w={parent:t,pattern:i,get child(){return r()},path:g,params:m,data:t.data,outlet:c,resolvePath(d){return j(n.path(),d,g())}};if(u)try{B=w,w.data=u({data:t.data,params:m,location:s,navigate:a(w)})}finally{B=void 0}return w}const Ze=T("<a link></a>"),et=e=>{const{source:t,url:r,base:o,data:n,out:s}=e,a=t||ke(),i=Ve(a,o,n);return h(ie.Provider,{value:i,get children(){return e.children}})},tt=e=>{const t=W(),r=J(),o=ne(()=>e.children),n=b(()=>le(o(),oe(r.pattern,e.base||""),nt)),s=b(()=>Xe(n(),t.location.pathname));t.out&&t.out.matches.push(s().map(({route:l,path:u,params:g})=>({originalPath:l.originalPath,pattern:l.pattern,path:u,params:g})));const a=[];let i;const c=b(te(s,(l,u,g)=>{let m=u&&l.length===u.length;const w=[];for(let d=0,x=l.length;d<x;d++){const P=u&&u[d],$=l[d];g&&P&&$.route.key===P.route.key?w[d]=g[d]:(m=!1,a[d]&&a[d](),be(O=>{a[d]=O,w[d]=Ye(t,w[d-1]||r,()=>c()[d+1],()=>s()[d])}))}return a.splice(l.length).forEach(d=>d()),g&&m?g:(i=w[0],w)}));return h(re,{get when(){return c()&&i},children:l=>h(M.Provider,{value:l,get children(){return l.outlet()}})})},Y=e=>{const t=ne(()=>e.children);return z(e,{get children(){return t()}})},nt=()=>{const e=J();return h(re,{get when(){return e.child},children:t=>h(M.Provider,{value:t,get children(){return t.outlet()}})})};function ue(e){e=z({inactiveClass:"inactive",activeClass:"active"},e);const[,t]=ve(e,["href","state","class","activeClass","inactiveClass","end"]),r=We(()=>e.href),o=ze(r),n=Fe(),s=b(()=>{const a=r();if(a===void 0)return!1;const i=E(a.split(/[?#]/,1)[0]).toLowerCase(),c=E(n.pathname).toLowerCase();return e.end?i===c:c.startsWith(i)});return(()=>{const a=L(Ze);return $e(a,z(t,{get href(){return o()||e.href},get state(){return JSON.stringify(e.state)},get classList(){return{...e.class&&{[e.class]:!0},[e.inactiveClass]:!s(),[e.activeClass]:s(),...t.classList}},get["aria-current"](){return s()?"page":void 0}}),!1,!1),Se(),a})()}const rt=T("<span> <!#><!/></span>");function ot(){return new Promise(e=>setTimeout(()=>e("loaded!"),500))}function st(){const[e]=_e(ot);return(()=>{const t=L(rt),r=t.firstChild,o=r.nextSibling,[n,s]=_(o.nextSibling);return v(t,e,n,s),t})()}const at=T("<main><h1>This page is completely static. Async data:<!#><!/></h1><section>An since it does not contain any interactive islands, no JavaScript is shipped to the browser.</section><!#><!/></main>"),it=T("<span> loading...</span>");function ct(){return(()=>{const e=L(at),t=e.firstChild,r=t.firstChild,o=r.nextSibling,[n,s]=_(o.nextSibling),a=t.nextSibling,i=a.nextSibling,[c,l]=_(i.nextSibling);return v(t,h(xe,{get fallback(){return L(it)},get children(){return h(st,{})}}),n,s),v(e,h(ue,{href:"/",children:"Home"}),c,l),e})()}const lt=T("<div></div>");function ut({children:e}){if(!e)throw new Error("TEST: THIS CODE MUST NOT SHOW UP IN THE CLIENT BUNDLE");return(()=>{const t=L(lt);return v(t,e),t})()}const ft=T("<code>ServerContent</code>"),ht=T("<main><h1>Partial hydration with SolidJS and <i>Capri</i></h1><section>This page is static, but contains some dynamic parts.</section><section>This counter is an interactive island: <!#><!/></section><section>And here is another one, independent from the one above: <!#><!/></section><!#><!/><!#><!/><!#><!/></main>");function dt(){return(()=>{const e=L(ht),t=e.firstChild,r=t.nextSibling,o=r.nextSibling,n=o.firstChild,s=n.nextSibling,[a,i]=_(s.nextSibling),c=o.nextSibling,l=c.firstChild,u=l.nextSibling,[g,m]=_(u.nextSibling),w=c.nextSibling,[d,x]=_(w.nextSibling),P=d.nextSibling,[$,O]=_(P.nextSibling),H=$.nextSibling,[C,S]=_(H.nextSibling);return v(o,h(V,{}),a,i),v(c,h(V,{start:100}),g,m),v(e,h(Re,{title:"Click to expand",get children(){return["This island receives children as prop. They are only rendered upon build time.",h(ut,{get children(){return["The code for ",L(ft)," won't show up in the client bundle."]}})]}}),d,x),v(e,h(Ae,{}),$,O),v(e,h(ue,{href:"/about",children:"Link to another page"}),C,S),e})()}function pt(){return h(Pe,{get children(){return h(tt,{get children(){return[h(Y,{path:"/",get element(){return h(dt,{})}}),h(Y,{path:"/about",get element(){return h(ct,{})}})]}})}})}Ce(()=>h(et,{get base(){return"/capri/solid/"},get children(){return h(pt,{})}}),document.getElementById("app"));
