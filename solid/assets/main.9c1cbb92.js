import{c as j,o as Z,r as ue,b as $,a as he,d as ee,u as D,e as te,f as ne,j as fe,k as G,l as f,m as de,S as re,n as pe,s as ge,g as C,p as me,q as b,v as Q,w as we,t as E,x as $e,y as x,z as be,N as ye,A as ve}from"./web.72fcf630.js";import X from"./Counter.island.929ae401.js";import Se from"./Expandable.island.0629234d.js";import _e from"./MediaQuery.island.f4ea1287.js";const Pe=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function r(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(n){if(n.ep)return;n.ep=!0;const s=r(n);fetch(n.href,s)}};Pe();function Re(e,t,r){return e.addEventListener(t,r),()=>e.removeEventListener(t,r)}function xe([e,t],r,o){return[r?()=>r(e()):e,o?n=>t(o(n)):t]}function Ce(e){try{return document.querySelector(e)}catch{return null}}function Ee(e,t){const r=Ce(`a#${e}`);r?r.scrollIntoView():t&&window.scrollTo(0,0)}function Ae(e,t,r,o){let n=!1;const s=l=>typeof l=="string"?{value:l}:l,a=xe(j(s(e()),{equals:(l,i)=>l.value===i.value}),void 0,l=>(!n&&t(l),l));return r&&Z(r((l=e())=>{n=!0,a[1](s(l)),n=!1})),{signal:a,utils:o}}function Le(e){if(e){if(Array.isArray(e))return{signal:e}}else return{signal:j({value:""})};return e}function Te(){return Ae(()=>({value:window.location.pathname+window.location.search+window.location.hash,state:history.state}),({value:e,replace:t,scroll:r,state:o})=>{t?window.history.replaceState(o,"",e):window.history.pushState(o,"",e),Ee(window.location.hash.slice(1),r)},e=>Re(window,"popstate",()=>e()),{go:e=>window.history.go(e)})}const Oe=/^(?:[a-z0-9]+:)?\/\//i,Ne=/^\/+|\/+$/g;function U(e,t=!1){const r=e.replace(Ne,"");return r?t||/^[?#]/.test(r)?r:"/"+r:""}function B(e,t,r){if(Oe.test(t))return;const o=U(e),n=r&&U(r);let s="";return!n||t.startsWith("/")?s=o:n.toLowerCase().indexOf(o.toLowerCase())!==0?s=o+n:s=n,(s||"/")+U(t,!s)}function Ie(e,t){if(e==null)throw new Error(t);return e}function oe(e,t){return U(e).replace(/\/*(\*.*)?$/g,"")+U(t)}function Ue(e){const t={};return e.searchParams.forEach((r,o)=>{t[o]=r}),t}function O(e,t){return decodeURIComponent(t?e.replace(/\+/g," "):e)}function He(e,t){const[r,o]=e.split("/*",2),n=r.split("/").filter(Boolean),s=n.length;return a=>{const l=a.split("/").filter(Boolean),i=l.length-s;if(i<0||i>0&&o===void 0&&!t)return null;const c={path:s?"":"/",params:{}};for(let d=0;d<s;d++){const w=n[d],g=l[d];if(w[0]===":")c.params[w.slice(1)]=g;else if(w.localeCompare(g,void 0,{sensitivity:"base"})!==0)return null;c.path+=`/${g}`}return o&&(c.params[o]=i?l.slice(-i).join("/"):""),c}}function ke(e){const[t,r]=e.pattern.split("/*",2),o=t.split("/").filter(Boolean);return o.reduce((n,s)=>n+(s.startsWith(":")?2:3),o.length-(r===void 0?0:1))}function se(e){const t=new Map,r=he();return new Proxy({},{get(o,n){return t.has(n)||ue(r,()=>t.set(n,$(()=>e()[n]))),t.get(n)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(e())}})}const qe=100,ae=ee(),K=ee(),W=()=>Ie(D(ae),"Make sure your app is wrapped in a <Router />");let H;const z=()=>H||D(K)||W().base,Be=e=>{const t=z();return $(()=>t.resolvePath(e()))},je=e=>{const t=W();return $(()=>{const r=e();return r!==void 0?t.renderPath(r):r})};function Ke(e,t="",r){const{path:o,component:n,data:s,children:a}=e,l=!a||Array.isArray(a)&&!a.length,i=oe(t,o),c=l?i:i.split("/*",1)[0];return{originalPath:o,pattern:c,element:n?()=>f(n,{}):()=>{const{element:d}=e;return d===void 0&&r?f(r,{}):d},preload:e.component?n.preload:e.preload,data:s,matcher:He(c,!l)}}function Me(e,t=0){return{routes:e,score:ke(e[e.length-1])*1e4-t,matcher(r){const o=[];for(let n=e.length-1;n>=0;n--){const s=e[n],a=s.matcher(r);if(!a)return null;o.unshift({...a,route:s})}return o}}}function ie(e,t="",r,o=[],n=[]){const s=Array.isArray(e)?e:[e];for(let a=0,l=s.length;a<l;a++){const i=s[a];if(i&&typeof i=="object"&&i.hasOwnProperty("path")){const c=Ke(i,t,r);if(o.push(c),i.children)ie(i.children,c.pattern,r,o,n);else{const d=Me([...o],n.length);n.push(d)}o.pop()}}return o.length?n:n.sort((a,l)=>l.score-a.score)}function De(e,t){for(let r=0,o=e.length;r<o;r++){const n=e[r].matcher(t);if(n)return n}return[]}function We(e,t){const r=new URL("http://sar"),o=$(i=>{const c=e();try{return new URL(c,r)}catch{return console.error(`Invalid path ${c}`),i}},r,{equals:(i,c)=>i.href===c.href}),n=$(()=>O(o().pathname)),s=$(()=>O(o().search,!0)),a=$(()=>O(o().hash)),l=$(()=>"");return{get pathname(){return n()},get search(){return s()},get hash(){return a()},get state(){return t()},get key(){return l()},query:se(ne(s,()=>Ue(o())))}}function ze(e,t="",r,o){const{signal:[n,s],utils:a={}}=Le(e),l=a.parsePath||(p=>p),i=a.renderPath||(p=>p),c=B("",t),d=void 0;if(c===void 0)throw new Error(`${c} is not a valid base path`);c&&!n().value&&s({value:c,replace:!0,scroll:!1});const[w,g]=fe(),[u,y]=j(n().value),[S,A]=j(n().state),P=We(u,S),R=[],_={pattern:c,params:{},path:()=>c,outlet:()=>null,resolvePath(p){return B(c,p)}};if(r)try{H=_,_.data=r({data:void 0,params:{},location:P,navigate:q(_)})}finally{H=void 0}function k(p,h,m){G(()=>{if(typeof h=="number"){h&&(a.go?a.go(h):console.warn("Router integration does not support relative routing"));return}const{replace:N,resolve:I,scroll:F,state:L}={replace:!1,resolve:!0,scroll:!0,...m},v=I?p.resolvePath(h):B("",h);if(v===void 0)throw new Error(`Path '${h}' is not a routable path`);if(R.length>=qe)throw new Error("Too many redirects");const T=u();if(v!==T||L!==S()){const M=R.push({value:T,replace:N,scroll:F,state:S()});g(()=>{y(v),A(L)}).then(()=>{R.length===M&&le({value:v,state:L})})}})}function q(p){return p=p||D(K)||_,(h,m)=>k(p,h,m)}function le(p){const h=R[0];h&&((p.value!==h.value||p.state!==h.state)&&s({...p,replace:h.replace,scroll:h.scroll}),R.length=0)}te(()=>{const{value:p,state:h}=n();G(()=>{p!==u()&&g(()=>{y(p),A(h)})})});{let p=function(h){if(h.defaultPrevented||h.button!==0||h.metaKey||h.altKey||h.ctrlKey||h.shiftKey)return;const m=h.composedPath().find(V=>V instanceof Node&&V.nodeName.toUpperCase()==="A");if(!m)return;const N=m instanceof SVGAElement,I=N?m.href.baseVal:m.href;if((N?m.target.baseVal:m.target)||!I&&!m.hasAttribute("state"))return;const L=(m.getAttribute("rel")||"").split(/\s+/);if(m.hasAttribute("download")||L&&L.includes("external"))return;const v=N?new URL(I,document.baseURI):new URL(I),T=O(v.pathname);if(v.origin!==window.location.origin||c&&T&&!T.toLowerCase().startsWith(c.toLowerCase()))return;const M=l(T+O(v.search,!0)+O(v.hash)),J=m.getAttribute("state");h.preventDefault(),k(_,M,{resolve:!1,replace:m.hasAttribute("replace"),scroll:!m.hasAttribute("noscroll"),state:J&&JSON.parse(J)})};document.addEventListener("click",p),Z(()=>document.removeEventListener("click",p))}return{base:_,out:d,location:P,isRouting:w,renderPath:i,parsePath:l,navigatorFactory:q}}function Fe(e,t,r,o){const{base:n,location:s,navigatorFactory:a}=e,{pattern:l,element:i,preload:c,data:d}=o().route,w=$(()=>o().path),g=se(()=>o().params);c&&c();const u={parent:t,pattern:l,get child(){return r()},path:w,params:g,data:t.data,outlet:i,resolvePath(y){return B(n.path(),y,w())}};if(d)try{H=u,u.data=d({data:t.data,params:g,location:s,navigate:a(u)})}finally{H=void 0}return u}const Je=E("<a></a>"),Ve=e=>{const{source:t,url:r,base:o,data:n,out:s}=e,a=t||Te(),l=ze(a,o,n);return f(ae.Provider,{value:l,get children(){return e.children}})},Ge=e=>{const t=W(),r=z(),o=$(()=>ie(e.children,oe(r.pattern,e.base||""),Qe)),n=$(()=>De(o(),t.location.pathname));t.out&&t.out.matches.push(n().map(({route:i,path:c,params:d})=>({originalPath:i.originalPath,pattern:i.pattern,path:c,params:d})));const s=[];let a;const l=$(ne(n,(i,c,d)=>{let w=c&&i.length===c.length;const g=[];for(let u=0,y=i.length;u<y;u++){const S=c&&c[u],A=i[u];d&&S&&A.route.pattern===S.route.pattern?g[u]=d[u]:(w=!1,s[u]&&s[u](),de(P=>{s[u]=P,g[u]=Fe(t,g[u-1]||r,()=>l()[u+1],()=>n()[u])}))}return s.splice(i.length).forEach(u=>u()),d&&w?d:(a=g[0],g)}));return f(re,{get when(){return l()&&a},children:i=>f(K.Provider,{value:i,get children(){return i.outlet()}})})},Y=e=>e,Qe=()=>{const e=z();return f(re,{get when(){return e.child},children:t=>f(K.Provider,{value:t,get children(){return t.outlet()}})})};function Xe(e){const[,t]=ge(e,["children","to","href","state"]),r=je(()=>e.to);return(()=>{const o=C(Je);return me(o,t,!1,!0),b(o,()=>e.children),te(n=>{const s=r()||e.href,a=JSON.stringify(e.state);return s!==n._v$&&Q(o,"href",n._v$=s),a!==n._v$2&&Q(o,"state",n._v$2=a),n},{_v$:void 0,_v$2:void 0}),we(),o})()}function ce(e){const t=Be(()=>e.href);return f(Xe,pe(e,{get to(){return t()}}))}const Ye=E("<span> </span>");function Ze(){return new Promise(e=>setTimeout(()=>e("loaded!"),500))}function et(){const[e]=$e(Ze);return(()=>{const t=C(Ye);return t.firstChild,b(t,e),t})()}const tt=E("<main><h1>This page is completely static. Async data:<!#><!/></h1><section>An since it does not contain any interactive islands, no JavaScript is shipped to the browser.</section><!#><!/></main>"),nt=E("<span> loading...</span>");function rt(){return(()=>{const e=C(tt),t=e.firstChild,r=t.firstChild,o=r.nextSibling,[n,s]=x(o.nextSibling),a=t.nextSibling,l=a.nextSibling,[i,c]=x(l.nextSibling);return b(t,f(be,{get fallback(){return C(nt)},get children(){return f(et,{})}}),n,s),b(e,f(ce,{href:"/",children:"Home"}),i,c),e})()}const ot=E("<div></div>");function st({children:e}){if(!e)throw new Error("TEST: THIS CODE MUST NOT SHOW UP IN THE CLIENT BUNDLE");return(()=>{const t=C(ot);return b(t,e),t})()}const at=E("<code>ServerContent</code>"),it=E("<main><h1>Partial hydration with SolidJS and <i>Capri</i></h1><section>This page is static, but contains some dynamic parts.</section><section>This counter is an interactive island: <!#><!/></section><section>And here is another one, independent from the one above: <!#><!/></section><!#><!/><!#><!/><!#><!/></main>");function ct(){return(()=>{const e=C(it),t=e.firstChild,r=t.nextSibling,o=r.nextSibling,n=o.firstChild,s=n.nextSibling,[a,l]=x(s.nextSibling),i=o.nextSibling,c=i.firstChild,d=c.nextSibling,[w,g]=x(d.nextSibling),u=i.nextSibling,[y,S]=x(u.nextSibling),A=y.nextSibling,[P,R]=x(A.nextSibling),_=P.nextSibling,[k,q]=x(_.nextSibling);return b(o,f(X,{}),a,l),b(i,f(X,{start:100}),w,g),b(e,f(Se,{title:"Click to expand",get children(){return["This island receives children as prop. They are only rendered upon build time.",f(st,{get children(){return["The code for ",C(at)," won't show up in the client bundle."]}})]}}),y,S),b(e,f(_e,{}),P,R),b(e,f(ce,{href:"/about",children:"Link to another page"}),k,q),e})()}function lt(){return f(ye,{get children(){return f(Ge,{get children(){return[f(Y,{path:"/",get element(){return f(ct,{})}}),f(Y,{path:"/about",get element(){return f(rt,{})}})]}})}})}ve(()=>f(Ve,{get base(){return"/capri/solid/"},get children(){return f(lt,{})}}),document.getElementById("app"));
