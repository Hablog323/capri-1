import"./modulepreload-polyfill-3cfb730f.js";import{c as N,o as Z,r as fe,a as v,g as de,b as ee,u as J,d as ge,e as G,f as pe,h as te,s as me,i as we,j as ye,k as f,l as ne,S as re,m as z,n as ve,p as $e,q as L,t as be,v as Se,w as T,x as _e,y as _,z as $,A as xe,N as Pe,B as Ce}from"./web-154b5ce3.js";import V from"./Counter.island-bf174874.js";import Re from"./Expandable.island-573468b7.js";import Ae from"./MediaQuery.island-e7b1ff02.js";function Ee(e,t,n){return e.addEventListener(t,n),()=>e.removeEventListener(t,n)}function Le([e,t],n,r){return[n?()=>n(e()):e,r?o=>t(r(o)):t]}function Te(e){try{return document.querySelector(e)}catch{return null}}function Oe(e,t){const n=Te(`#${e}`);n?n.scrollIntoView():t&&window.scrollTo(0,0)}function ke(e,t,n,r){let o=!1;const s=i=>typeof i=="string"?{value:i}:i,a=Le(N(s(e()),{equals:(i,c)=>i.value===c.value}),void 0,i=>(!o&&t(i),i));return n&&Z(n((i=e())=>{o=!0,a[1](s(i)),o=!1})),{signal:a,utils:r}}function Ie(e){if(e){if(Array.isArray(e))return{signal:e}}else return{signal:N({value:""})};return e}function Ne(){return ke(()=>({value:window.location.pathname+window.location.search+window.location.hash,state:history.state}),({value:e,replace:t,scroll:n,state:r})=>{t?window.history.replaceState(r,"",e):window.history.pushState(r,"",e),Oe(window.location.hash.slice(1),n)},e=>Ee(window,"popstate",()=>e()),{go:e=>window.history.go(e)})}function Be(){let e=new Set;function t(o){return e.add(o),()=>e.delete(o)}let n=!1;function r(o,s){if(n)return!(n=!1);const a={to:o,options:s,defaultPrevented:!1,preventDefault:()=>a.defaultPrevented=!0};for(const i of e)i.listener({...a,from:i.location,retry:c=>{c&&(n=!0),i.navigate(o,s)}});return!a.defaultPrevented}return{subscribe:t,confirm:r}}const He=/^(?:[a-z0-9]+:)?\/\//i,Ue=/^\/+|\/+$/g;function E(e,t=!1){const n=e.replace(Ue,"");return n?t||/^[?#]/.test(n)?n:"/"+n:""}function D(e,t,n){if(He.test(t))return;const r=E(e),o=n&&E(n);let s="";return!o||t.startsWith("/")?s=r:o.toLowerCase().indexOf(r.toLowerCase())!==0?s=r+o:s=o,(s||"/")+E(t,!s)}function je(e,t){if(e==null)throw new Error(t);return e}function oe(e,t){return E(e).replace(/\/*(\*.*)?$/g,"")+E(t)}function qe(e){const t={};return e.searchParams.forEach((n,r)=>{t[r]=n}),t}function K(e,t){return decodeURIComponent(t?e.replace(/\+/g," "):e)}function De(e,t){const[n,r]=e.split("/*",2),o=n.split("/").filter(Boolean),s=o.length;return a=>{const i=a.split("/").filter(Boolean),c=i.length-s;if(c<0||c>0&&r===void 0&&!t)return null;const l={path:s?"":"/",params:{}};for(let u=0;u<s;u++){const p=o[u],m=i[u];if(p[0]===":")l.params[p.slice(1)]=m;else if(p.localeCompare(m,void 0,{sensitivity:"base"})!==0)return null;l.path+=`/${m}`}return r&&(l.params[r]=c?i.slice(-c).join("/"):""),l}}function Ke(e){const[t,n]=e.pattern.split("/*",2),r=t.split("/").filter(Boolean);return r.reduce((o,s)=>o+(s.startsWith(":")?2:3),r.length-(n===void 0?0:1))}function se(e){const t=new Map,n=de();return new Proxy({},{get(r,o){return t.has(o)||fe(n,()=>t.set(o,v(()=>e()[o]))),t.get(o)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(e())}})}function ae(e){let t=/(\/?\:[^\/]+)\?/.exec(e);if(!t)return[e];let n=e.slice(0,t.index),r=e.slice(t.index+t[0].length);const o=[n,n+=t[1]];for(;t=/^(\/\:[^\/]+)\?/.exec(r);)o.push(n+=t[1]),r=r.slice(t[0].length);return ae(r).reduce((s,a)=>[...s,...o.map(i=>i+a)],[])}const Me=100,ie=ee(),M=ee(),W=()=>je(J(ie),"Make sure your app is wrapped in a <Router />");let B;const F=()=>B||J(M)||W().base,We=e=>{const t=F();return v(()=>t.resolvePath(e()))},ze=e=>{const t=W();return v(()=>{const n=e();return n!==void 0?t.renderPath(n):n})},Je=()=>W().location;function Fe(e,t="",n){const{component:r,data:o,children:s}=e,a=!s||Array.isArray(s)&&!s.length,i={key:e,element:r?()=>f(r,{}):()=>{const{element:c}=e;return c===void 0&&n?f(n,{}):c},preload:e.component?r.preload:e.preload,data:o};return ce(e.path).reduce((c,l)=>{for(const u of ae(l)){const p=oe(t,u),m=a?p:p.split("/*",1)[0];c.push({...i,originalPath:u,pattern:m,matcher:De(m,!a)})}return c},[])}function Qe(e,t=0){return{routes:e,score:Ke(e[e.length-1])*1e4-t,matcher(n){const r=[];for(let o=e.length-1;o>=0;o--){const s=e[o],a=s.matcher(n);if(!a)return null;r.unshift({...a,route:s})}return r}}}function ce(e){return Array.isArray(e)?e:[e]}function le(e,t="",n,r=[],o=[]){const s=ce(e);for(let a=0,i=s.length;a<i;a++){const c=s[a];if(c&&typeof c=="object"&&c.hasOwnProperty("path")){const l=Fe(c,t,n);for(const u of l){r.push(u);const p=Array.isArray(c.children)&&c.children.length===0;if(c.children&&!p)le(c.children,u.pattern,n,r,o);else{const m=Qe([...r],o.length);o.push(m)}r.pop()}}}return r.length?o:o.sort((a,i)=>i.score-a.score)}function Xe(e,t){for(let n=0,r=e.length;n<r;n++){const o=e[n].matcher(t);if(o)return o}return[]}function Ge(e,t){const n=new URL("http://sar"),r=v(c=>{const l=e();try{return new URL(l,n)}catch{return console.error(`Invalid path ${l}`),c}},n,{equals:(c,l)=>c.href===l.href}),o=v(()=>K(r().pathname)),s=v(()=>K(r().search,!0)),a=v(()=>K(r().hash)),i=v(()=>"");return{get pathname(){return o()},get search(){return s()},get hash(){return a()},get state(){return t()},get key(){return i()},query:se(te(s,()=>qe(r())))}}function Ve(e,t="",n,r){const{signal:[o,s],utils:a={}}=Ie(e),i=a.parsePath||(g=>g),c=a.renderPath||(g=>g),l=a.beforeLeave||Be(),u=D("",t),p=void 0;if(u===void 0)throw new Error(`${u} is not a valid base path`);u&&!o().value&&s({value:u,replace:!0,scroll:!1});const[m,y]=N(!1),d=async g=>{y(!0);try{await me(g)}finally{y(!1)}},[x,P]=N(o().value),[b,O]=N(o().state),H=Ge(x,b),C=[],S={pattern:u,params:{},path:()=>u,outlet:()=>null,resolvePath(g){return D(u,g)}};if(n)try{B=S,S.data=n({data:void 0,params:{},location:H,navigate:X(S)})}finally{B=void 0}function Q(g,h,w){G(()=>{if(typeof h=="number"){h&&(a.go?l.confirm(h,w)&&a.go(h):console.warn("Router integration does not support relative routing"));return}const{replace:U,resolve:j,scroll:R,state:k}={replace:!1,resolve:!0,scroll:!0,...w},A=j?g.resolvePath(h):D("",h);if(A===void 0)throw new Error(`Path '${h}' is not a routable path`);if(C.length>=Me)throw new Error("Too many redirects");const I=x();if((A!==I||k!==b())&&!we){if(l.confirm(A,w)){const q=C.push({value:I,replace:U,scroll:R,state:b()});d(()=>{P(A),O(k),ye()}).then(()=>{C.length===q&&he({value:A,state:k})})}}})}function X(g){return g=g||J(M)||S,(h,w)=>Q(g,h,w)}function he(g){const h=C[0];h&&((g.value!==h.value||g.state!==h.state)&&s({...g,replace:h.replace,scroll:h.scroll}),C.length=0)}ge(()=>{const{value:g,state:h}=o();G(()=>{g!==x()&&d(()=>{P(g),O(h)})})});{let g=function(h){if(h.defaultPrevented||h.button!==0||h.metaKey||h.altKey||h.ctrlKey||h.shiftKey)return;const w=h.composedPath().find(q=>q instanceof Node&&q.nodeName.toUpperCase()==="A");if(!w||!w.hasAttribute("link"))return;const U=w.href;if(w.target||!U&&!w.hasAttribute("state"))return;const j=(w.getAttribute("rel")||"").split(/\s+/);if(w.hasAttribute("download")||j&&j.includes("external"))return;const R=new URL(U),k=K(R.pathname);if(R.origin!==window.location.origin||u&&k&&!k.toLowerCase().startsWith(u.toLowerCase()))return;const A=i(R.pathname+R.search+R.hash),I=w.getAttribute("state");h.preventDefault(),Q(S,A,{resolve:!1,replace:w.hasAttribute("replace"),scroll:!w.hasAttribute("noscroll"),state:I&&JSON.parse(I)})};pe(["click"]),document.addEventListener("click",g),Z(()=>document.removeEventListener("click",g))}return{base:S,out:p,location:H,isRouting:m,renderPath:c,parsePath:i,navigatorFactory:X,beforeLeave:l}}function Ye(e,t,n,r){const{base:o,location:s,navigatorFactory:a}=e,{pattern:i,element:c,preload:l,data:u}=r().route,p=v(()=>r().path),m=se(()=>r().params);l&&l();const y={parent:t,pattern:i,get child(){return n()},path:p,params:m,data:t.data,outlet:c,resolvePath(d){return D(o.path(),d,p())}};if(u)try{B=y,y.data=u({data:t.data,params:m,location:s,navigate:a(y)})}finally{B=void 0}return y}const Ze=T("<a link></a>"),et=e=>{const{source:t,url:n,base:r,data:o,out:s}=e,a=t||Ne(),i=Ve(a,r,o);return f(ie.Provider,{value:i,get children(){return e.children}})},tt=e=>{const t=W(),n=F(),r=ne(()=>e.children),o=v(()=>le(r(),oe(n.pattern,e.base||""),nt)),s=v(()=>Xe(o(),t.location.pathname));t.out&&t.out.matches.push(s().map(({route:l,path:u,params:p})=>({originalPath:l.originalPath,pattern:l.pattern,path:u,params:p})));const a=[];let i;const c=v(te(s,(l,u,p)=>{let m=u&&l.length===u.length;const y=[];for(let d=0,x=l.length;d<x;d++){const P=u&&u[d],b=l[d];p&&P&&b.route.key===P.route.key?y[d]=p[d]:(m=!1,a[d]&&a[d](),ve(O=>{a[d]=O,y[d]=Ye(t,y[d-1]||n,()=>c()[d+1],()=>s()[d])}))}return a.splice(l.length).forEach(d=>d()),p&&m?p:(i=y[0],y)}));return f(re,{get when(){return c()&&i},children:l=>f(M.Provider,{value:l,get children(){return l.outlet()}})})},Y=e=>{const t=ne(()=>e.children);return z(e,{get children(){return t()}})},nt=()=>{const e=F();return f(re,{get when(){return e.child},children:t=>f(M.Provider,{value:t,get children(){return t.outlet()}})})};function ue(e){e=z({inactiveClass:"inactive",activeClass:"active"},e);const[,t]=$e(e,["href","state","class","activeClass","inactiveClass","end"]),n=We(()=>e.href),r=ze(n),o=Je(),s=v(()=>{const a=n();if(a===void 0)return!1;const i=E(a.split(/[?#]/,1)[0]).toLowerCase(),c=E(o.pathname).toLowerCase();return e.end?i===c:c.startsWith(i)});return(()=>{const a=L(Ze);return be(a,z(t,{get href(){return r()||e.href},get state(){return JSON.stringify(e.state)},get classList(){return{...e.class&&{[e.class]:!0},[e.inactiveClass]:!s(),[e.activeClass]:s(),...t.classList}},get"aria-current"(){return s()?"page":void 0}}),!1,!1),Se(),a})()}const rt=T("<span> <!#><!/></span>");function ot(){return new Promise(e=>setTimeout(()=>e("loaded!"),500))}function st(){const[e]=_e(ot);return(()=>{const t=L(rt),n=t.firstChild,r=n.nextSibling,[o,s]=_(r.nextSibling);return $(t,e,o,s),t})()}const at=T("<main><h1>This page is completely static. Async data:<!#><!/></h1><section>An since it does not contain any interactive islands, no JavaScript is shipped to the browser.</section><!#><!/></main>"),it=T("<span> loading...</span>");function ct(){return(()=>{const e=L(at),t=e.firstChild,n=t.firstChild,r=n.nextSibling,[o,s]=_(r.nextSibling),a=t.nextSibling,i=a.nextSibling,[c,l]=_(i.nextSibling);return $(t,f(xe,{get fallback(){return L(it)},get children(){return f(st,{})}}),o,s),$(e,f(ue,{href:"/",children:"Home"}),c,l),e})()}const lt=T("<div></div>");function ut({children:e}){if(!e)throw new Error("TEST: THIS CODE MUST NOT SHOW UP IN THE CLIENT BUNDLE");return(()=>{const t=L(lt);return $(t,e),t})()}const ht=T("<code>ServerContent</code>"),ft=T("<main><h1>Partial hydration with SolidJS and <i>Capri</i></h1><section>This page is static, but contains some dynamic parts.</section><section>This counter is an interactive island: <!#><!/></section><section>And here is another one, independent from the one above: <!#><!/></section><!#><!/><!#><!/><!#><!/></main>");function dt(){return(()=>{const e=L(ft),t=e.firstChild,n=t.nextSibling,r=n.nextSibling,o=r.firstChild,s=o.nextSibling,[a,i]=_(s.nextSibling),c=r.nextSibling,l=c.firstChild,u=l.nextSibling,[p,m]=_(u.nextSibling),y=c.nextSibling,[d,x]=_(y.nextSibling),P=d.nextSibling,[b,O]=_(P.nextSibling),H=b.nextSibling,[C,S]=_(H.nextSibling);return $(r,f(V,{}),a,i),$(c,f(V,{start:100}),p,m),$(e,f(Re,{title:"Click to expand",get children(){return["This island receives children as prop. They are only rendered upon build time.",f(ut,{get children(){return["The code for ",L(ht)," won't show up in the client bundle."]}})]}}),d,x),$(e,f(Ae,{}),b,O),$(e,f(ue,{href:"/about",children:"Link to another page"}),C,S),e})()}function gt(){return f(Pe,{get children(){return f(tt,{get children(){return[f(Y,{path:"/",get element(){return f(dt,{})}}),f(Y,{path:"/about",get element(){return f(ct,{})}})]}})}})}Ce(()=>f(et,{get base(){return"/capri/solid/"},get children(){return f(gt,{})}}),document.getElementById("app"));
